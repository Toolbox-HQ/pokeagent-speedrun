Bootstrap: docker
From: ubuntu:24.04

%environment
    export DEBIAN_FRONTEND=noninteractive
    export PATH="/root/.local/bin:$PATH"

%post
    apt-get update && \
        apt-get install -y \
            git \
            curl \
            sudo \
            xz-utils \
            ffmpeg \
            libpng16-16 \
            libzip4 \
            libsqlite3-0 \
            libelf1 \
            uuid-runtime \
            liblua5.4-0 && \
        apt-get clean && \
        rm -rf /var/lib/apt/lists/*

    # Create work directory
    mkdir -p /install
    cd /install

    # Download and install mGBA
    curl -L -o mGBA-0.10.5-ubuntu64-noble.tar.xz \
        https://github.com/mgba-emu/mgba/releases/download/0.10.5/mGBA-0.10.5-ubuntu64-noble.tar.xz

    tar -xf mGBA-0.10.5-ubuntu64-noble.tar.xz
    rm mGBA-0.10.5-ubuntu64-noble.tar.xz

    dpkg -i mGBA-0.10.5-ubuntu64-noble/libmgba.deb